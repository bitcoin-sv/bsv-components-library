plugins {
    id 'java'
    id "org.sonarqube" version "3.5.0.2730"
}

/****************************************
 * Local Configuration
 ****************************************/
jclGroup = "$jclGroup"
jclVersion = "$jclVersion"

group = "$rootProject.jclGroup"
version = "$rootProject.jclVersion"

sourceCompatibility = "11"
targetCompatibility = "11"

allprojects {
    apply plugin: 'java'
    apply plugin: 'groovy'
    apply plugin: 'jacoco'

    repositories {
        mavenCentral()
        mavenLocal()
    }

    dependencies {
        implementation 'org.slf4j:slf4j-api:1.7.26'

        testImplementation 'org.codehaus.groovy:groovy'
        testImplementation "org.spockframework:spock-core:1.2-groovy-2.5"
        testImplementation "ch.qos.logback:logback-classic:1.2.8"
    }

    jacoco {
        toolVersion = "0.8.8"
    }

    jacocoTestReport {
        reports {
            xml.required = true
            csv.required = false
        }
        dependsOn test
    }

    test {
        finalizedBy jacocoTestReport
    }

    sonarqube {
        properties {
            property "sonar.projectKey", "bitcoin-sv_bsv-components-library"
            property "sonar.organization", "bitcoin-sv"
            property "sonar.host.url", "https://sonarcloud.io"
        }
    }
}

